| **Subtopic**                                          | **Focus & Purpose**                          | **Key Concepts / Details**                                                      | **One-Line Recall**                                                 |
| ----------------------------------------------------- | -------------------------------------------- | ------------------------------------------------------------------------------- | ------------------------------------------------------------------- |
| **[[LC9.4.2.1 Router Patterns]]**                     | Branching logic                              | RunnableBranch; choosing prompt A or B based on classification                  | Route to different prompts.                                         |
| **[[LC9.4.2.2 Jinja2 Logic]]**                        | Template conditionals                        | {% if user.is_premium %}; using Jinja2 for complex prompt logic                 | Use Jinja2 for internal logic.                                      |
| **[[LC9.4.2.3 Classification-Based]]**                | Intent driven                                | Classify intent -> Select specific prompt template                              | Select prompt based on intent.                                      |
| **[[LC9.4.2.4 Fallback Branches]]**                   | Failure handling                             | If high-quality prompt fails, switch to robust/simpler prompt                   | Switch prompt on failure.                                           |
| **[[LC9.4.2.5 Length-Dependence]]**                   | Adapting to input size                       | Short input -> detailed prompt; Long input -> summary prompt                    | Adapt mechanism to input length.                                    |
