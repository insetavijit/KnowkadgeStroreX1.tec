| **Subtopic**                                   | **Focus & Purpose**                     | **Key Concepts / Details**                                                    | **One-Line Recall**                                             |
| ---------------------------------------------- | --------------------------------------- | ----------------------------------------------------------------------------- | --------------------------------------------------------------- |
| **LC11.7.6.1 Automated Review Comments**       | Feedback                                | Generating review feedback                                                    | LLMs review code like a senior developer.                       |
| **LC11.7.6.2 Style Checking**                  | Consistency                             | Checking coding standards                                                     | Enforce style beyond linters.                                   |
| **LC11.7.6.3 Improvement Suggestions**         | Quality                                 | Suggesting refactoring opportunities                                          | Get suggestions for cleaner code.                               |
| **LC11.7.6.4 PR Review Automation**            | Workflow                                | Integrating with GitHub/GitLab                                                | Automate PR review with LLMs.                                   |
| **LC11.7.6.5 Review Best Practices**           | Process                                 | Effective AI code review patterns                                             | Combine AI review with human oversight.                         |

# Code Review: AI-Powered Quality Assurance

Automated code review that goes beyond linting.

---

## 1. Automated Review Comments

```python
review_prompt = ChatPromptTemplate.from_template("""
Review this code change:

```{language}
{code}
```

As a senior developer, provide:
1. Summary of what this code does
2. Potential bugs or issues
3. Code quality concerns
4. Performance considerations
5. Security issues
6. Suggestions for improvement

Format as review comments.
""")

result = chain.invoke({
    "language": "python",
    "code": '''
def process_user_data(users):
    for user in users:
        data = requests.get(f"http://api.com/users/{user['id']}")
        save_to_db(data.json())
    return "done"
    '''
})
```

---

## 2. Style Checking

Beyond lintingâ€”semantic style:

```python
style_prompt = ChatPromptTemplate.from_template("""
Check this code for style issues:

```python
{code}
```

Check for:
1. Naming conventions (are names descriptive?)
2. Function length (should any be split?)
3. Comment quality (helpful or redundant?)
4. Code organization
5. Pythonic patterns (list comprehensions, generators)
6. Type hint consistency
""")
```

---

## 3. Improvement Suggestions

```python
improve_prompt = ChatPromptTemplate.from_template("""
Suggest improvements for this code:

```python
{code}
```

Categories:
1. Readability improvements
2. Performance optimizations
3. Maintainability enhancements
4. Error handling additions
5. Test coverage suggestions

For each suggestion, show before/after.
""")
```

---

## 4. PR Review Automation

GitHub Action integration:

```yaml
# .github/workflows/ai-review.yml
name: AI Code Review

on:
  pull_request:
    types: [opened, synchronize]

jobs:
  review:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Get changed files
        id: files
        uses: jitterbit/get-changed-files@v1
        
      - name: AI Review
        run: python scripts/ai_review.py "${{ steps.files.outputs.all }}"
        env:
          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

```python
# scripts/ai_review.py
import sys
from github import Github

def review_files(file_paths: list[str]):
    g = Github(os.environ["GITHUB_TOKEN"])
    repo = g.get_repo(os.environ["GITHUB_REPOSITORY"])
    pr = repo.get_pull(int(os.environ["PR_NUMBER"]))
    
    for path in file_paths:
        if path.endswith(".py"):
            code = read_file(path)
            review = get_ai_review(code)
            
            pr.create_issue_comment(
                f"**AI Review for `{path}`**\n\n{review}"
            )

if __name__ == "__main__":
    review_files(sys.argv[1].split())
```

---

## 5. Best Practices

| Practice | Description |
|----------|-------------|
| **Human override** | AI reviews should be advisory, not blocking |
| **Specific prompts** | Customize for your codebase style |
| **False positive handling** | Easy suppress mechanism |
| **Learning** | Fine-tune based on accepted/rejected suggestions |
| **Context** | Include project context in prompts |

```python
# Good: Specific review with context
review_prompt = """
Review this code FOR OUR CODEBASE:
- We use SQLAlchemy for DB
- FastAPI for endpoints
- Pydantic for validation

Code:
{code}
"""
```

---

## Quick Reference

| Component | Purpose |
|-----------|---------|
| **Review** | Find issues and suggestions |
| **Style** | Enforce non-lintable standards |
| **Improve** | Proactive enhancements |
| **PR Integration** | Automate in CI/CD |
