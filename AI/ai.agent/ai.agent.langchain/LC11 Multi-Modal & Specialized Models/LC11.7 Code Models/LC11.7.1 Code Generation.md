| **Subtopic**                                   | **Focus & Purpose**                     | **Key Concepts / Details**                                                    | **One-Line Recall**                                             |
| ---------------------------------------------- | --------------------------------------- | ----------------------------------------------------------------------------- | --------------------------------------------------------------- |
| **LC11.7.1.1 Function Generation**             | Creating functions                      | Generating complete functions from descriptions                               | Describe what you want; LLM writes the code.                    |
| **LC11.7.1.2 Class Generation**                | OOP                                     | Generating classes with methods                                               | Generate full classes from specifications.                      |
| **LC11.7.1.3 Test Generation**                 | Testing                                 | Creating unit tests from code                                                 | Auto-generate tests for existing code.                          |
| **LC11.7.1.4 Documentation Generation**        | Docs                                    | Creating docstrings and comments                                              | Generate documentation from code.                               |
| **LC11.7.1.5 Best Practices**                  | Quality                                 | Ensuring generated code follows standards                                     | Prompt for clean, idiomatic code.                               |

# Code Generation: Writing Code with LLMs

LLMs as your pair programming partner.

---

## 1. Function Generation

```python
from langchain_openai import ChatOpenAI
from langchain_core.prompts import ChatPromptTemplate

llm = ChatOpenAI(model="gpt-4o")

code_gen_prompt = ChatPromptTemplate.from_template("""
Generate a Python function with the following specification:

Name: {function_name}
Description: {description}
Parameters: {parameters}
Returns: {returns}

Include:
- Type hints
- Docstring
- Error handling
- Example usage in comments

Respond with only the code, no explanations.
""")

chain = code_gen_prompt | llm

result = chain.invoke({
    "function_name": "parse_email",
    "description": "Extract name and domain from email address",
    "parameters": "email: str",
    "returns": "tuple[str, str] - (username, domain)"
})

print(result.content)
```

---

## 2. Class Generation

```python
class_prompt = ChatPromptTemplate.from_template("""
Generate a Python class:

Class Name: {class_name}
Purpose: {purpose}
Attributes: {attributes}
Methods: {methods}

Requirements:
- Use dataclass or Pydantic if appropriate
- Include __str__ and __repr__
- Type hints everywhere
- Comprehensive docstrings
""")

result = chain.invoke({
    "class_name": "User",
    "purpose": "Represent a user in the system",
    "attributes": "id: int, email: str, created_at: datetime",
    "methods": "is_active(), update_email(new_email)"
})
```

---

## 3. Test Generation

```python
test_gen_prompt = ChatPromptTemplate.from_template("""
Generate pytest tests for this function:

```python
{code}
```

Include:
- Happy path tests
- Edge cases
- Error cases
- Use pytest fixtures where appropriate
""")

code_to_test = '''
def divide(a: float, b: float) -> float:
    """Divide a by b."""
    if b == 0:
        raise ValueError("Cannot divide by zero")
    return a / b
'''

tests = chain.invoke({"code": code_to_test})
```

---

## 4. Documentation Generation

```python
doc_prompt = ChatPromptTemplate.from_template("""
Generate documentation for this code:

```python
{code}
```

Provide:
1. Module docstring
2. Function/class docstrings (Google style)
3. Inline comments for complex logic
4. Usage examples
""")
```

---

## 5. Best Practices for Code Gen

| Practice | Prompt Addition |
|----------|-----------------|
| **Clean code** | "Follow PEP 8 and clean code principles" |
| **Defensive** | "Include input validation and error handling" |
| **Testable** | "Make functions pure and dependency-injectable" |
| **Documented** | "Include comprehensive docstrings" |
| **Modern** | "Use Python 3.10+ features (match, walrus)" |

```python
best_practices_suffix = """
Additional requirements:
- Follow PEP 8
- Use descriptive variable names
- Keep functions under 20 lines
- Use early returns
- Add type hints
- Make code testable
"""
```

---

## Quick Reference

| Task | Prompt Focus |
|------|--------------|
| **Function** | Name, params, returns, behavior |
| **Class** | Attributes, methods, inheritance |
| **Tests** | Coverage, edge cases, fixtures |
| **Docs** | Style (Google/Numpy), examples |
