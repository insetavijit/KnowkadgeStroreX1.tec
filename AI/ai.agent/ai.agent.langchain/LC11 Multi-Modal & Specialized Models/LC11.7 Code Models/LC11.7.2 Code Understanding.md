| **Subtopic**                                   | **Focus & Purpose**                     | **Key Concepts / Details**                                                    | **One-Line Recall**                                             |
| ---------------------------------------------- | --------------------------------------- | ----------------------------------------------------------------------------- | --------------------------------------------------------------- |
| **LC11.7.2.1 Code Explanation**                | Teaching                                | Explaining what code does                                                     | LLMs explain code in natural language.                          |
| **LC11.7.2.2 Complexity Analysis**             | Performance                             | Analyzing time/space complexity                                               | Analyze Big-O complexity of algorithms.                         |
| **LC11.7.2.3 Dependency Analysis**             | Architecture                            | Understanding code dependencies                                               | Map imports and function calls.                                 |
| **LC11.7.2.4 Pattern Recognition**             | Design                                  | Identifying design patterns in code                                           | Detect patterns like Singleton, Factory.                        |
| **LC11.7.2.5 Security Analysis**               | Safety                                  | Finding potential security issues                                             | Identify SQL injection, XSS, etc.                               |

# Code Understanding: Making Sense of Code

LLMs as code explainers and analyzers.

---

## 1. Code Explanation

```python
explain_prompt = ChatPromptTemplate.from_template("""
Explain this code:

```{language}
{code}
```

Provide:
1. One-sentence summary
2. Step-by-step breakdown
3. Key concepts used
4. Potential improvements
""")

chain = explain_prompt | llm

result = chain.invoke({
    "language": "python",
    "code": '''
def fibonacci(n: int) -> list[int]:
    if n <= 0:
        return []
    fib = [0, 1]
    while len(fib) < n:
        fib.append(fib[-1] + fib[-2])
    return fib[:n]
    '''
})
```

---

## 2. Complexity Analysis

```python
complexity_prompt = ChatPromptTemplate.from_template("""
Analyze the time and space complexity of this code:

```{language}
{code}
```

Provide:
1. Time complexity (Big-O)
2. Space complexity (Big-O)
3. Explanation of analysis
4. Suggestions for optimization if applicable
""")
```

**Output example**:
```
Time Complexity: O(n)
- The while loop runs n-2 times
- Each iteration is O(1) with list append

Space Complexity: O(n)
- The fib list stores n elements

Optimization: Use generator for O(1) space if only iterating.
```

---

## 3. Dependency Analysis

```python
dependency_prompt = ChatPromptTemplate.from_template("""
Analyze dependencies in this code:

```python
{code}
```

Identify:
1. External imports (third-party)
2. Standard library imports
3. Internal module dependencies
4. Function call graph (what calls what)
5. Potential circular dependencies
""")
```

---

## 4. Pattern Recognition

```python
pattern_prompt = ChatPromptTemplate.from_template("""
Identify design patterns in this code:

```{language}
{code}
```

For each pattern found:
1. Pattern name
2. Where it's implemented
3. Is it correctly implemented?
4. Any anti-patterns present?
""")
```

**Common patterns LLMs detect**:
- Singleton, Factory, Builder
- Observer, Strategy, Decorator
- Repository, Unit of Work
- Dependency Injection

---

## 5. Security Analysis

```python
security_prompt = ChatPromptTemplate.from_template("""
Perform a security review of this code:

```{language}
{code}
```

Check for:
1. SQL Injection vulnerabilities
2. XSS vulnerabilities
3. Insecure data handling
4. Authentication/authorization issues
5. Hardcoded secrets
6. Input validation problems

For each issue:
- Severity (Critical/High/Medium/Low)
- Location
- Remediation
""")
```

**Example output**:
```
Issue 1: SQL Injection (Critical)
Location: Line 15 - f"SELECT * FROM users WHERE id = {user_id}"
Fix: Use parameterized queries: cursor.execute("SELECT * FROM users WHERE id = ?", (user_id,))
```

---

## Quick Reference

| Analysis | Key Prompt Elements |
|----------|---------------------|
| **Explain** | Summary + step-by-step |
| **Complexity** | Time + space Big-O |
| **Dependencies** | Imports + call graph |
| **Patterns** | Design pattern names |
| **Security** | OWASP top 10 checks |
