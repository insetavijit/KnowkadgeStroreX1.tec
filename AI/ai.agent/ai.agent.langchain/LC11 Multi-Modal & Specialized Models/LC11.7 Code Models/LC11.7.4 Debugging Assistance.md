| **Subtopic**                                   | **Focus & Purpose**                     | **Key Concepts / Details**                                                    | **One-Line Recall**                                             |
| ---------------------------------------------- | --------------------------------------- | ----------------------------------------------------------------------------- | --------------------------------------------------------------- |
| **LC11.7.4.1 Error Explanation**               | Understanding                           | Explaining what errors mean                                                   | LLMs explain cryptic error messages.                            |
| **LC11.7.4.2 Bug Detection**                   | Finding bugs                            | Identifying bugs in code                                                      | Find bugs before runtime.                                       |
| **LC11.7.4.3 Fix Suggestions**                 | Solutions                               | Proposing fixes for errors                                                    | Get suggested fixes for bugs.                                   |
| **LC11.7.4.4 Stack Trace Analysis**            | Debugging                               | Understanding exception traces                                                | Analyze stack traces for root cause.                            |
| **LC11.7.4.5 Debugging Strategies**            | Process                                 | Systematic debugging approaches                                               | LLMs suggest debugging steps.                                   |

# Debugging Assistance: AI-Powered Bug Fixing

LLMs help find and fix bugs faster.

---

## 1. Error Explanation

```python
error_explain_prompt = ChatPromptTemplate.from_template("""
Explain this error in simple terms:

Error:
```
{error_message}
```

Code that caused it:
```python
{code}
```

Provide:
1. What the error means
2. Why it happened
3. Common causes of this error
""")

result = chain.invoke({
    "error_message": "TypeError: 'NoneType' object is not subscriptable",
    "code": '''
def get_first_item(data):
    return data[0]

result = get_first_item(None)
'''
})
```

---

## 2. Bug Detection

```python
bug_detect_prompt = ChatPromptTemplate.from_template("""
Find bugs in this code:

```{language}
{code}
```

For each bug:
1. Location (line number/function)
2. Bug description
3. Why it's a bug
4. Suggested fix
""")

# Example bugs LLMs catch:
# - Off-by-one errors
# - Null pointer issues
# - Race conditions
# - Resource leaks
# - Logic errors
```

---

## 3. Fix Suggestions

```python
fix_prompt = ChatPromptTemplate.from_template("""
Fix this bug:

Error:
```
{error}
```

Buggy code:
```python
{code}
```

Provide:
1. Root cause analysis
2. The fixed code
3. Explanation of the fix
""")

result = chain.invoke({
    "error": "IndexError: list index out of range",
    "code": '''
def get_element(lst, index):
    return lst[index]
    '''
})
```

---

## 4. Stack Trace Analysis

```python
stacktrace_prompt = ChatPromptTemplate.from_template("""
Analyze this stack trace:

```
{stack_trace}
```

Explain:
1. Where the error originated
2. The call chain that led to it
3. The root cause
4. Most likely fix
""")

result = chain.invoke({
    "stack_trace": '''
Traceback (most recent call last):
  File "app.py", line 45, in main
    result = process_data(data)
  File "processor.py", line 23, in process_data
    return transform(cleaned)
  File "transform.py", line 12, in transform
    return data['key']
KeyError: 'key'
'''
})
```

---

## 5. Debugging Strategies

```python
debug_strategy_prompt = ChatPromptTemplate.from_template("""
I'm debugging this issue:

Symptom: {symptom}
Code: 
```python
{code}
```

What I've tried: {tried}

Suggest:
1. Next debugging steps
2. Key things to check
3. Print statements or breakpoints to add
4. Potential root causes to investigate
""")

result = chain.invoke({
    "symptom": "Function returns empty list when it shouldn't",
    "code": "...",
    "tried": "Checked input data - it's correct"
})
```

---

## Complete Debugging Chain

```python
class DebuggingAssistant:
    def __init__(self):
        self.llm = ChatOpenAI(model="gpt-4o")
    
    def explain_error(self, error: str, code: str) -> str:
        return error_explain_chain.invoke({"error_message": error, "code": code})
    
    def find_bugs(self, code: str) -> list:
        result = bug_detect_chain.invoke({"code": code, "language": "python"})
        return parse_bugs(result)
    
    def suggest_fix(self, error: str, code: str) -> str:
        return fix_chain.invoke({"error": error, "code": code})
    
    def analyze_stacktrace(self, trace: str) -> str:
        return stacktrace_chain.invoke({"stack_trace": trace})
```

---

## Quick Reference

| Task | Input | Output |
|------|-------|--------|
| **Explain** | Error message | Plain English explanation |
| **Detect** | Code | List of potential bugs |
| **Fix** | Error + code | Fixed code |
| **Trace** | Stack trace | Root cause analysis |
