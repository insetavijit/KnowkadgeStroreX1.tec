| **Subtopic** | **Focus** | **Key Concepts** | **One-Line Recall** |
|---|---|---|---|
| **LC12.7.1-8** | Cost Management | Chargeback, Cost Allocation, Budget Controls, Usage Tracking, Optimization, ROI, Vendor Management, Forecasting | Managing LLM costs. |

# Cost Management: Chargeback / Cost Allocation / Budget Controls / Usage Tracking / Optimization Strategies / ROI Measurement / Vendor Management / Cost Forecasting

```python
# Token tracking and cost calculation
class CostManager:
    PRICES = {
        "gpt-4o": {"input": 0.005/1000, "output": 0.015/1000},
        "gpt-4o-mini": {"input": 0.00015/1000, "output": 0.0006/1000}
    }
    
    def track_usage(self, tenant_id: str, model: str, tokens: dict):
        cost = (
            tokens["input"] * self.PRICES[model]["input"] +
            tokens["output"] * self.PRICES[model]["output"]
        )
        
        db.execute("""
            INSERT INTO usage (tenant_id, model, tokens, cost, date)
            VALUES (%s, %s, %s, %s, CURRENT_DATE)
        """, (tenant_id, model, tokens, cost))
    
    def get_monthly_cost(self, tenant_id: str, month: str) -> float:
        result = db.query("""
            SELECT SUM(cost) FROM usage
            WHERE tenant_id = %s AND date >= %s AND date < %s
        """, (tenant_id, month, next_month))
        return result[0]
    
    def check_budget(self, tenant_id: str) -> dict:
        budget = config_service.get_budget(tenant_id)
        current_cost = self.get_monthly_cost(tenant_id, current_month())
        
        return {
            "budget": budget,
            "spent": current_cost,
            "remaining": budget - current_cost,
            "percent_used": (current_cost / budget) * 100
        }
```

**Quick Ref:** Track token usage, calculate costs, enforce budgets, generate chargeback reports.
