| **Subtopic** | **Focus** | **Key Concepts** | **One-Line Recall** |
|---|---|---|---|
| **LC12.3.3.1 Role Definition** | Design | Define roles and permissions | Create role hierarchy. |
| **LC12.3.3.2 Permission Assignment** | Management | Assign permissions to roles | Roles group permissions. |
| **LC12.3.3.3 User-Role Mapping** | Assignment | Assign users to roles | Users inherit role permissions. |
| **LC12.3.3.4 Role Hierarchy** | Structure | Roles can inherit from others | Admin inherits from User. |
| **LC12.3.3.5 Dynamic Roles** | Advanced | Runtime role calculation | Calculate roles dynamically. |

# RBAC: Role-Based Access Control

Implementing role-based permissions for LangChain apps.

```python
# Role definition
ROLES = {
    "admin": ["*"],
    "user": ["conversations:read", "conversations:write"],
    "viewer": ["conversations:read"]
}

class RBACService:
    def get_user_roles(self, user_id: str) -> list[str]:
        return db.query("SELECT role FROM user_roles WHERE user_id = %s", (user_id,))
    
    def has_permission(self, user_id: str, permission: str) -> bool:
        roles = self.get_user_roles(user_id)
        
        for role in roles:
            if permission in ROLES.get(role, []) or "*" in ROLES.get(role, []):
                return True
        
        return False

@require_role("admin")
async def admin_endpoint():
    pass
```

**Quick Ref:** Roles group permissions, users get roles, check role before action.
